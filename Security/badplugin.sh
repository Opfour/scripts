 function yesno { read -p "$question " choice;case "$choice" in y|Y|yes|Yes|YES ) decision=1;; n|N|no|No|NO ) decision=0;; * ) echo "invalid" && yesno; esac; };function moveplugindir { question="Move Entire Plugin Directory to check if it resolves the issue? [y/N] " && yesno; if [ $decision = 1 ]; then echo -e "\nDid that Fix the Issue? If so then move Plugin Direcory back and continue to check individual plugins.\n" && mv "$_fullpathwpp" "$_fullpathwpc/bak.plugins" && question="Move Plugin Directory back? [y/N] " && yesno; if [ $decision -eq 1 ]; then mv "$_fullpathwpc/bak.plugins" "$_fullpathwpp" && echo -e "Plugin Direcotry has been moved back.\n" && moveplugins; else echo "Plugins Directory has not been moved back! It is located at: $_fullpathwpc/bak.plugins"; fi; else moveplugins; fi };function moveplugins { question="Move Individual Plugins One by One? [y/N] " && yesno; if [ $decision -eq 1 ]; then for each in `find $_fullpathwpp/* -maxdepth 0 -type d -exec basename \{} \;`;do mv "$_fullpathwpp/$each" "$_fullpathwpp/bak.$each" && echo -e "\nMoved $each plugin.  Please check if issue is resolved.\n" && question="Move $each plugin back and Continue to Next plugin? [y/N] " && yesno; if [ $decision = 1 ]; then mv "$_fullpathwpp/bak.$each" "$_fullpathwpp/$each" && continue; else mv "$_fullpathwpp/bak.$each" "$_fullpathwpp/$each" && break; fi; done; echo -e "\n${RED}$each${NC} plugin is most likely the problem! \n It is now moved back to original directory $_fullpathwpp/$each"; fi; };function wppathdir { echo -e "\n" && read -r -p "Path to Root Wordpress Directory? " _rawpath && _path=${_rawpath%/} && _fullpathwpp=$_path/wp-content/plugins && _fullpathwpc=$_path/wp-content; if [ ! -d "$_fullpathwpp" ]; then echo -e '\n Your Path does not contain the expected wp-content/plugins Directory\!' && wppathdir; else echo -e "\nThere are $(find $_fullpathwpp/* -maxdepth 0 -type d|wc -l) Plugins" && read -r -p "LW UserName? " _lwu && _pathplugbak=$_fullpathwpc/bak.$_lwu.$(date +%m-%d-%y-%H$M).plugins && cp -a $_fullpathwpp $_pathplugbak && chmod 700 $_pathplugbak && echo "Plugins Directory Backup is chmod 700 and copied to "$_pathplugbak && moveplugindir; fi }; RED='\033[0;31m';NC='\033[0m';CYAN='\033[0;36m';wppathdir;echo -e "\n ${RED}Remember to remove backup that was created if you don't need it: $_pathplugbak ${NC}" && echo -e "\n ${CYAN}THANKS FOR PLAYING WORDPRESS PLUGIN ROULETTE${NC}"
